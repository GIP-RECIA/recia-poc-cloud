version: '2.2'

services:
  ldap:
    build:
      context: .docker
      dockerfile: ldap/Dockerfile
    image: '${DOCKER_DEVBOX_REGISTRY}recia-env/ldap'
    init: true
    restart: '${DOCKER_DEVBOX_RESTART_POLICY}'
    environment:
      - 'LDAP_BACKEND=bdb'
      - 'LDAP_DOMAIN=esco-centre.fr'
      - 'LDAP_BASE_DN=dc=esco-centre,dc=fr'
    volumes:
      - '${COMPOSE_PROJECT_DIR}:/workdir'
      - 'ldap-data:/var/lib/ldap'
      - 'ldap-config:/etc/ldap/slapd.d'
volumes:
  ldap-data: null
  ldap-config: null
